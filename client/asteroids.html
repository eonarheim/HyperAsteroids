<DOCTYPE html>
<html style="background-color:black !important">
<head>
	
</head>
<body>


 
<!-- Modal -->
<div id="myModal" class="modal hide" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-header">
    
    <h3 id="myModalLabel">Modal header</h3>
  </div>
  <div class="modal-body">
    <h2>Welcome to Hyper Asteroids!</h2>
    <h5>Choose a nickname and head into space!!!<h5>
    <label for="nickname">Nickname</label>
    <input id="nickname" type="text">
  </div>
  <div class="modal-footer">
    <button data-dismiss="modal">Get Started!</button>
  </div>
</div>

<svg id="game">
</svg>


<link href="../css/main.css" rel='stylesheet'>
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script src="../lib/bootstrap.js"></script>
<script src="../lib/socket.io.js"></script>
<script src="asteroids.js"></script>	
<script>
	// Start the game
	$(function(){
		$('#myModal').modal('show');

		$('#myModal').on('hidden', function startGame(){
			var name = $("#nickname")[0].value;
			var game = new Game(name);

			var keys = [];
			// Capture key events
			window.onkeydown = function(ev){
				if(keys.indexOf(ev.keyCode)<0){
					keys.push(ev.keyCode);
				}
			};
			window.onkeyup = function(ev){
				var key = keys.indexOf(ev.keyCode);
				keys.splice(key,1);
			};

			// Mainloop
			window.setInterval(function(){

				var forward = false;
				var angle  = 0.0;
				var fire = false;
				//uparrow
				if(keys.indexOf(38)>-1){
					forward = true;
				}
				//leftarrow
				if(keys.indexOf(37)>-1){
					angle = -0.1;
				}

				//rightarrow
				if(keys.indexOf(39)>-1){
					angle = 0.1;
				}

				//spacebar
				if(keys.indexOf(32)>-1){
					fire = true;
				}
				if(angle !== 0.0 || forward){
					game.move(forward, angle);
				}
				if(fire){
					game.fire(angle);
				}

				game.draw();

			}, 30);
		});

	})
</script>
</body>
</html>